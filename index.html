<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Vibrant.js example</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="libraries/vibrant.js"></script>
  </head>
  <style>
  
@import url('https://fonts.googleapis.com/css?family=Playfair Display&display=swap');
body, html {
  margin: 0;
  padding: 0;
  font-family: 'Playfair Display', sans-serif; /* You can change the font-family to match your design */
}

h1 {
  color: #FCA311;
  font-weight: 900;
  font-size: 60px;
  text-align: center;
}  
h2{
  color: white;
  font-weight: 600;
  font-size: 48px;
  text-align: center;
}
h3{
  text-align: center;
  font-weight: 500;
  font-size: 32px;
}

h4{
  color: white;
  font-size: 24px;
  text-align: center;
  font-weight: 400;
}

h5 {
  color:black;
  font-weight: 400;
  font-size: 20px;
  align-items:center;
}
h6{
  color: black;
  font-weight: 600;
  font-size: 48px;
  text-align: center;
  margin-bottom: 0;
}

p{
  color:black;
  font-weight: 400;
  font-size: 20px;
  text-align: center;
}
#scroll{
    position: absolute;
  bottom: 20px; /* Adjust this to place it where you want */
  left: 0;
  right: 0;
  text-align: center;
  z-index: 2; /* This ensures it's above the Lottie animation */
}

#intro {
  width: 100%;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color:black;
  color: white;
  z-index: 10;
  text-align: center;
}
#content-intro {
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #e5e5e5;
  z-index: 10;
}
#dot-matrix-container{
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap:40px;
}
.svg-container svg {
    transform: rotateX(45deg) rotateZ(45deg);
    transform-origin: center center; /* Adjust as needed */
}
#guide{
    margin-bottom: 60px;
}

.column {
  float: left;
  width: 33.33%;
}
.column:first-child {
  display: flex;
  flex-direction: column; /* or row, depending on your layout */
  justify-content: center; /* Centers children horizontally in the container */
  align-items: center; /* Centers children vertically in the container */
}


.column:last-child {
  text-align: right; /* Aligns content to the right */
  align-items: flex-end; 
}

/* Clear floats after the columns */
.row:after {
  content: "";
  clear: both;
}

button {
  width: 300px;
  height: 200px;
  border: none; /* No borders */
  padding: 15px 32px; /* Padding around the text */
  text-align: center; /* Centered text */
  text-decoration: none; /* No underline on the text */
  display: inline-block; /* Inline block level element */
  margin: 4px 2px; /* Margins around the button */
  cursor: pointer; /* Pointer cursor on hover */
  background-color: transparent;
}
#svg-container8{
    width: 500px;
    height: 250px;
}

#svg-container1{
    width: 250px;
    height: 250px;
}

#svg-container2,#svg-container3{
    width: 400px;
    height: 250px;
}
/* Add a hover effect for buttons */
button:hover {
  background-color: #FCA311; /* Darker green background on hover */
}
.svg-container {
  transform: rotateX(45deg) rotateZ(45deg);
}
#content{
    margin-top: 40px;
    background-color: #e5e5e5;
}

.floor{
    margin: 60px;
}

</style>
  <body>
    <div id="body">
    <!-- <div id="loading">Loading...</div> -->
<div id="intro">
        <div class="intro-content">
            <div id="header">
            <h1>ArtSip</h1>
        </div>
            <h4>The discover of National Gallery of Art.</h4>
          
            <div id="animation">
            <div id="lottie-animation"></div>
        </div>
            <div id="scroll">
                <h7>Scroll to explore</h7>
            </div>
        </div>
    </div>

<div id="content-intro">
    <h3> There are 2,547 art works in National Gallery of Art that you can discover</h3>
    <div id="dot-matrix-container">
        <h5 >Here is the proportion of the Art Works</h5>
    
        <svg width="300" height="300"></svg>
        <div id="legend"></div>
    </div>
    
</div>

<div class="content">
<div id="guide">
    <h6> Let's discover the National Gallery of Art!</h6>
    <p> Choose a floor plan</p>
</div>

<div class="floor">
<div class="column" >
    <button class="svg-container" id="svg-container1" onclick="window.location.href='page1.html'">
        <img src="Sclupture Garden.svg" alt="Sculpture Garden">
      </button>
    </div>
<div class="column" >
    <button class="svg-container" id="svg-container2" onclick="window.location.href='page2.html'">
        <img src="West Building, Main floor.svg" alt="WM">
      </button>
    
      <button class="svg-container" id="svg-container3" onclick="window.location.href='page3.html'">
        <img src="West Building, Ground floor.svg" alt="WG">
      </button>
    </div>
    <div class="column" >
        <button class="svg-container" id="svg-container4" onclick="window.location.href='page4.html'">
            <img src="East Building, Tower.svg" alt="ET">
          </button>
          <button class="svg-container" id="svg-container5" onclick="window.location.href='page5.html'">
            <img src="East Building, Upper Level.svg" alt="EU">
          </button>
          <button class="svg-container" id="svg-container6" onclick="window.location.href='page6.html'">
            <img src="East Building, Mezzanine.svg" alt="EM">
          </button>
          <button class="svg-container" id="svg-container7" onclick="window.location.href='page7.html'">
            <img src="East Building, Ground Level.svg" alt="EG">
          </button>
          <button class="svg-container" id="svg-container8" onclick="window.location.href='page8.html'">
            <img src="East Building, Concourse.svg" alt="EC">
          </button>
    </div>
</div>
</div>

</div>

<script>
// Loading page delay 3sec
window.addEventListener('load', function () {
    setTimeout(function() {
        var loading = document.getElementById('loading');
        loading.style.display = 'none';
    }, 3000); 
});


document.getElementById('svg-container1').addEventListener('click', function() {
        window.location.href = 'Sculpture Garden.html';
    });

// Dot matrix
 d3.csv("Finaldata.csv").then(function (data) {
     // นับจำนวนครั้งที่ซ้ำของ TypesofArt
     let typeCounts = {};
    data.forEach(d => {
        if (!typeCounts[d.TypesofArt]) {
            typeCounts[d.TypesofArt] = 0;
        }
        typeCounts[d.TypesofArt] += 1;
    });

// Calculate dots per type    
const totalOccurrences = d3.sum(Object.values(typeCounts));
    const totalDots = 100;
    let typeDots = {};
    for (const artType in typeCounts) {
        typeDots[artType] = Math.round(totalDots * (typeCounts[artType] / totalOccurrences));
    }


    // Define colorMap here or ensure it's defined outside this snippet
    let colorMap = {
        "Sculpture": "#ef3c23",
        "Painting": "#1b4793",
        "Decorative Art": "#f15a42",
        "Drawing": "#fac92c",
        "New media": "#f7b0be",
        "Photograph": "#ed8e83",
        "Print": "#cfe5cc",
        "Volume": "#2178ae",
    };

    // Create dot matrix
    const svgDotMatrix = d3.select("#dot-matrix-container svg");
    let row = 0, col = 0;
    const matrixWidth = 300; // Width of the matrix
const matrixHeight = 300; // Height of the matrix
// Assuming a 10x10 grid for simplicity
const dotsPerRow = Math.sqrt(totalDots); // for square layout
const dotSpacing = matrixWidth / dotsPerRow; // adjust spacing to fill the width
const dotSize = dotSpacing - 2; // subtracting 2 pixels for a little space between dots

for (const artType in typeDots) {
    const dots = typeDots[artType];
    for (let i = 0; i < dots; i++) {
        svgDotMatrix.append("circle")
            .attr("cx", col * dotSpacing + (dotSize / 2))
            .attr("cy", row * dotSpacing + (dotSize / 2))
            .attr("r", dotSize / 2)
            .attr("fill", colorMap[artType])
            .attr("stroke", "white");

        col++;
        if (col >= dotsPerRow) {
            col = 0;
            row++;
        }
    }
}

    // Create legends
 
d3.select("#legend").selectAll("div").remove(); // Clear the legend first

const totalTypesCount = d3.sum(Object.values(typeCounts)); // Calculate the total number of art types

Object.keys(typeDots).forEach(artType => {
    if (colorMap[artType]) {
        const percentage = (typeCounts[artType] / totalTypesCount * 100).toFixed(2); // Calculate the percentage
        d3.select("#legend").append("div")
            .style("display", "inline-block")
            .style("margin-right", "20px")
            .html(`
                <div style="display: inline-block; width: ${20}px; height: ${20}px; background-color: ${colorMap[artType]}; border-radius: 50%; margin-right: 5px;"></div>
                ${artType}: ${percentage}%
            `);
    }
});

});


</script>